<div *ngIf="state !== undefined && currentMap !== undefined" class="edit-wrap">
    <div class="top">
        <h1>{{currentMap.getTitle()}}</h1>
        <app-horizontal-trail [curState]="state[state.length-1]"></app-horizontal-trail>
        <fa-icon [icon]="faImage" (click)="selectedIcon === ICON_SELECTED.IMAGE ? selectedIcon = ICON_SELECTED.NONE : selectedIcon = ICON_SELECTED.IMAGE"></fa-icon>
        <input *ngIf="selectedIcon === ICON_SELECTED.IMAGE" type="file" (change)="view.addImage($event); selectedIcon = ICON_SELECTED.NONE;">
        <fa-icon [icon]="faShapes" (click)="selectedIcon === ICON_SELECTED.SHAPES ? selectedIcon = ICON_SELECTED.NONE : selectedIcon = ICON_SELECTED.SHAPES"></fa-icon>
        <div *ngIf="selectedIcon === ICON_SELECTED.SHAPES" id="shape-wrapper">
            <svg class="shape-display" viewBox="0, 0, 10, 10" (click)="view.addShape('square')">
                <rect x="1" y="1" width="9" height="9"></rect>
            </svg>
            <svg class="shape-display" viewBox="0, 0, 10, 10" (click)="view.addShape('triangle')">
                <polygon points="5,1.34 10,10, 0,10"></polygon>
            </svg>
            <svg class="shape-display" viewBox="0, 0, 10, 10" (click)="view.addShape('circle')">
                <circle cx="5.5" cy="5.5" r="4.5"></circle>
            </svg>
            <svg class="shape-display" viewBox="0, 0, 10, 10" (click)="lineAdd === LINE_ADD.NONE && arcAdd === ARC_ADD.NONE ? lineAdd = LINE_ADD.DRAW_POINT : lineAdd = lineAdd; selectedIcon = ICON_SELECTED.NONE">
                <line x1="1" y1="5.5" x2="9" y2="5.5" stroke="black" stroke-width="0.25px"></line>
            </svg>
            <svg class="shape-display" viewBox="0, 0, 10, 10" (click)="arcAdd === ARC_ADD.NONE && lineAdd === LINE_ADD.NONE ? arcAdd = ARC_ADD.DRAW_CENTRE : arcAdd = arcAdd; selectedIcon = ICON_SELECTED.NONE">
                <path d="M10 8 a 5 5 0 1 0 -10 0" stroke="black" fill="none" stroke-width="0.25px"></path>
            </svg>
        </div>
        <!--
        <button (click)="view.addShape('square')">Square</button>
        <button (click)="view.addShape('circle')">Circle</button>
        <button (click)="view.addShape('triangle')">Triangle</button>
        <button (click)="view.addShape('right triangle')">Right Triangle</button>
        <button (click)="view.addShape('parallelogram')">Parallelogram</button>
        <button (click)="lineOptions()">Create line</button>
        -->
    </div>
    <div class="bot">
        <nav *ngIf="state.length > 1" class="vertical-nav">
            <app-vertical-trail></app-vertical-trail>
        </nav>
        <main class="landmark-wrapper">
            <app-view [editMode]="true" [currentLandmark]="state[state.length-1][1]" [lineAdd]="lineAdd" (lineAdded)="lineAdded()" [arcAdd]="arcAdd" (arcAdded)="arcAdded()" #view></app-view>
        </main>
        <aside class="legend">
            <app-legend></app-legend>
        </aside>
    </div>
    <ng-container #editOptions></ng-container>
</div>